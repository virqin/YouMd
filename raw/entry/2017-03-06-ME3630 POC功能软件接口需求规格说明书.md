---
layout: post
title: ME3630 POC功能软件接口需求规格说明书
category: 4G模块
tags: [__admin,ME3630]
---
    
#中兴物联ME3610/ME3630模块适配

#0 POC功能软件接口需求说明书
> 说明：POC主应用程序，由第三方提供，并运行于模块内部AP侧。本需求说明书，主要用来说明，为配合第三方应用实现完整POC功能，模块侧需要提供的接口

##0.1 POC接口

###0.1.1 TTS语音功能
- TTS开始播放接口
> AP侧的linux 应用程序可调用API

- TTS停止播放接口
> AP侧的linux 应用程序可调用API

- 播放结束主动上报

- 查询TTS当前状态接口
> AP侧的linux 应用程序可调用API
如 停止状态，正在播放状态

###0.1.2 PPP拨号功能
- 建立PPP拨号接口
> AP侧的linux 应用程序可调用API

- 断开PPP拨号接口
> AP侧的linux 应用程序可调用API

- PPP拨号是否成功的通知接口
> AP侧的linux 应用程序可调用API

- PPP连接状态查询接口
> AP侧的linux 应用程序可调用API

###0.1.3 运营商网络状态查询
- 网络切换通知接口
> AP侧的linux 应用程序可调用API

- 网络掉线通知接口
> AP侧的linux 应用程序可调用API
当网络no service或者limited service时，进行时间通知的接口

- 网络当前状态接口
> AP侧的linux 应用程序可调用API

###0.1.4 网络切换
- 主动切换网络的AT接口

###0.1.5 串口功能
- 2线串口
> MCU通过串口收发AT命令

###0.1.6 音频
- 录音接口 
> AP侧的linux 应用程序可调用API
采样率为8K，样本为16bit。PCM语音格式。

- 播放接口
> AP侧的linux 应用程序可调用API

###0.1.7 TCP/UDP
- socket接口
> AP侧的linux 应用程序可调用API
支持UDP 和TCP 建立、发送、接收通知、网络状态通知、关闭等接口

###0.1.8 文件操作
- 写文件接口
> AP侧的linux 应用程序可调用API

###0.1.9 指令透传
> 客户自定义指令的数据内容透传功能（指令格式AT+POC=XXXXX (XXXXX为数据内容)
通过串口上报数据为+POC:XXXXX ） 
（AP侧的linux 应用程序可调用API）

###0.1.10 ADC1输入电压检测
- 用户电池可能超过4.3v,ldo降压，采集原本电池电压不准，就需要分压采样ADC1的电压

###0.1.11 查询SIM卡状态
- 提供API接口查询cpin状态

###0.1.12 查询IMEI和MEID的值
- 提供API接口查询IMEI和MEID的值

###0.1.13 电源电压检测
- 用户使用的电池供电，需提醒当前电池电量，需要检测VBAT（供电管脚的电压值）

===========

###0.1.14 GPIO
- 13个空闲GPIO管脚

> 1）  5个是输出属性设置，可以输出高电平低电平，提供linux poc应用（客户POC 线程调用）可调用的接口函数及声明

> 2） 8个是输入属性设置，可检测高电平和低电平，提供linux poc应用（客户POC 线程调用）注册电平变化的回调的接口函数、可以查询当前输入管脚的电平及函数声明 （之前昌华 已经实现了2个管脚这个属性的接口函数）

> 3） 所有13个管脚在模块跑起来后的初始态为 输入

> 4） api接口函数可配置输入GPIO属性为输出属性

> 管脚的作用在与，通过管脚的高低变化，poc的应用可以检测电平变化，内部发起呼叫事件，音量调节事件等，在某些客户场景下可以省去外部MCU

###0.1.15 休眠唤醒功能
- MCU主动进入休眠接口
> WAKEUP_IN管脚，MCU通过高低电平指示模块休眠还是唤醒

- 模块唤醒后提醒MCU
> WAKEUP_OUT管脚，模块通过该管脚唤醒MCU

###0.1.16 连接保持
- 休眠期间PPP连接可保持

###0.1.17 禁止POC版本互项升级
- 由于不同客户POC方案存在差异，需要禁止不同客户或者分支之间的版本通过升级工具互相升级

> 使用POC版本的模块，出厂后，原则上只能在相应分支的POC版本上进行升级或者回退版本。

> 禁止POC和电力，通用版本之间的互相升级，以及降级到非电信自注册版本

> 当试图通过升级工具，对模块升级其他版本，或者不同分支的POC版本时，
1）升级工具禁止进行相应的升级操作
或者
2）版本升级成功后，功能服务相关的AT命令禁用

> 对于由于升级错误POC版本导致的AT命令禁用的情况，通过升级正确对应的POC版本，能够完整执行正确版本的业务功能。

> 提供对版本控制NV进行查询的方法

> 当模块功能AT禁用时，能够检测当前AT命令禁用的情况是由于升级错误版本造成的，还是由于版本故障造成的

###0.1.18 工具
> 抓取AP侧log的指导文档或者工具

###0.1.19 交叉编译环境
> ME3630的交叉编译环境和说明 

###0.1.20 工具
- 抓取AP侧log的指导文档或者工具

###0.1.21 交叉编译环境
- ME3630的交叉编译环境和说明